
> site-tasker-backend@1.0.0 dev
> nodemon --exec ts-node src/index.ts

[33m[nodemon] 3.1.10[39m
[33m[nodemon] to restart at any time, enter `rs`[39m
[33m[nodemon] watching path(s): *.*[39m
[33m[nodemon] watching extensions: ts,json[39m
[32m[nodemon] starting `ts-node src/index.ts`[39m
[dotenv@17.2.0] injecting env (22) from .env (tip: üîê encrypt with dotenvx: https://dotenvx.com)
‚úÖ SendGrid configured successfully
[dotenv@17.2.0] injecting env (0) from .env (tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild)
[90m[4mquery:[24m[39m [94mSELECT[0m [95mversion[0m[37m([0m[37m)[0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m*[0m [94mFROM[0m [95mcurrent_schema[0m[37m([0m[37m)[0m
[90m[4mquery:[24m[39m [94mCREATE[0m [37mEXTENSION[0m [94mIF[0m [94mNOT[0m [94mEXISTS[0m [37m"uuid-ossp"[0m
[90m[4mquery:[24m[39m [94mDROP VIEW[0m [94mIF[0m [94mEXISTS[0m [37mreporting[0m[37m.[0m[37mactive_site_assignments[0m [94mCASCADE[0m
[90m[4mquery:[24m[39m [94mDROP VIEW[0m [94mIF[0m [94mEXISTS[0m [37mreporting[0m[37m.[0m[37moverdue_reports[0m [94mCASCADE[0m
‚úÖ Dependent views dropped successfully
‚úÖ Database connection established successfully

üöÄ Site Tasker API Server Started Successfully!

üìç Server Details:
   ‚Ä¢ Port: 3001
   ‚Ä¢ Environment: development
   ‚Ä¢ Database: Connected to PostgreSQL
   
üåê Available Endpoints:
   ‚Ä¢ Health Check: http://localhost:3001/health
   ‚Ä¢ API Docs: http://localhost:3001/api-docs
   ‚Ä¢ Auth API: http://localhost:3001/auth/*
   
üîß Development URLs:
   ‚Ä¢ Frontend: http://localhost:3000
   
‚ö° Ready to handle requests!
      
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"User"[0m[37m.[0m[37m"user_id"[0m [94mAS[0m [37m"User_user_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"company_id"[0m [94mAS[0m [37m"User_company_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"User_email"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password_hash"[0m [94mAS[0m [37m"User_password_hash"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"first_name"[0m [94mAS[0m [37m"User_first_name"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"last_name"[0m [94mAS[0m [37m"User_last_name"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"phone"[0m [94mAS[0m [37m"User_phone"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"role"[0m [94mAS[0m [37m"User_role"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"employee_id"[0m [94mAS[0m [37m"User_employee_id"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"avatar_url"[0m [94mAS[0m [37m"User_avatar_url"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"emergency_contact_name"[0m [94mAS[0m [37m"User_emergency_contact_name"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"emergency_contact_phone"[0m [94mAS[0m [37m"User_emergency_contact_phone"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"date_of_birth"[0m [94mAS[0m [37m"User_date_of_birth"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"license_number"[0m [94mAS[0m [37m"User_license_number"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"is_active"[0m [94mAS[0m [37m"User_is_active"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"last_login_at"[0m [94mAS[0m [37m"User_last_login_at"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password_reset_token"[0m [94mAS[0m [37m"User_password_reset_token"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"password_reset_expires_at"[0m [94mAS[0m [37m"User_password_reset_expires_at"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"email_verified_at"[0m [94mAS[0m [37m"User_email_verified_at"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"timezone"[0m [94mAS[0m [37m"User_timezone"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"created_at"[0m [94mAS[0m [37m"User_created_at"[0m[37m,[0m [37m"User"[0m[37m.[0m[37m"updated_at"[0m [94mAS[0m [37m"User_updated_at"[0m [94mFROM[0m [37m"core"[0m[37m.[0m[37m"users"[0m [37m"User"[0m [94mWHERE[0m [37m([0m[37m([0m[37m"User"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m[37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["admin@testconstruction.com"][0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"Company"[0m[37m.[0m[37m"company_id"[0m [94mAS[0m [37m"Company_company_id"[0m[37m,[0m [37m"Company"[0m[37m.[0m[37m"company_name"[0m [94mAS[0m [37m"Company_company_name"[0m[37m,[0m [37m"Company"[0m[37m.[0m[37m"company_email"[0m [94mAS[0m [37m"Company_company_email"[0m[37m,[0m [37m"Company"[0m[37m.[0m[37m"company_phone"[0m [94mAS[0m [37m"Company_company_phone"[0m[37m,[0m [37m"Company"[0m[37m.[0m[37m"company_address"[0m [94mAS[0m [37m"Company_company_address"[0m[37m,[0m [37m"Company"[0m[37m.[0m[37m"company_abn"[0m [94mAS[0m [37m"Company_company_abn"[0m[37m,[0m [37m"Company"[0m[37m.[0m[37m"company_logo_url"[0m [94mAS[0m [37m"Company_company_logo_url"[0m[37m,[0m [37m"Company"[0m[37m.[0m[37m"subscription_tier"[0m [94mAS[0m [37m"Company_subscription_tier"[0m[37m,[0m [37m"Company"[0m[37m.[0m[37m"billing_email"[0m [94mAS[0m [37m"Company_billing_email"[0m[37m,[0m [37m"Company"[0m[37m.[0m[37m"timezone"[0m [94mAS[0m [37m"Company_timezone"[0m[37m,[0m [37m"Company"[0m[37m.[0m[37m"is_active"[0m [94mAS[0m [37m"Company_is_active"[0m[37m,[0m [37m"Company"[0m[37m.[0m[37m"trial_ends_at"[0m [94mAS[0m [37m"Company_trial_ends_at"[0m[37m,[0m [37m"Company"[0m[37m.[0m[37m"created_at"[0m [94mAS[0m [37m"Company_created_at"[0m[37m,[0m [37m"Company"[0m[37m.[0m[37m"updated_at"[0m [94mAS[0m [37m"Company_updated_at"[0m [94mFROM[0m [37m"core"[0m[37m.[0m[37m"companies"[0m [37m"Company"[0m [94mWHERE[0m [37m([0m[37m([0m[37m"Company"[0m[37m.[0m[37m"company_email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m[37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["contact@testconstruction.com"][0m
[90m[4mquery:[24m[39m [94mSELECT[0m [37m"PendingRegistration"[0m[37m.[0m[37m"registration_id"[0m [94mAS[0m [37m"PendingRegistration_registration_id"[0m[37m,[0m [37m"PendingRegistration"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"PendingRegistration_email"[0m[37m,[0m [37m"PendingRegistration"[0m[37m.[0m[37m"password_hash"[0m [94mAS[0m [37m"PendingRegistration_password_hash"[0m[37m,[0m [37m"PendingRegistration"[0m[37m.[0m[37m"first_name"[0m [94mAS[0m [37m"PendingRegistration_first_name"[0m[37m,[0m [37m"PendingRegistration"[0m[37m.[0m[37m"last_name"[0m [94mAS[0m [37m"PendingRegistration_last_name"[0m[37m,[0m [37m"PendingRegistration"[0m[37m.[0m[37m"phone"[0m [94mAS[0m [37m"PendingRegistration_phone"[0m[37m,[0m [37m"PendingRegistration"[0m[37m.[0m[37m"company_name"[0m [94mAS[0m [37m"PendingRegistration_company_name"[0m[37m,[0m [37m"PendingRegistration"[0m[37m.[0m[37m"company_email"[0m [94mAS[0m [37m"PendingRegistration_company_email"[0m[37m,[0m [37m"PendingRegistration"[0m[37m.[0m[37m"company_phone"[0m [94mAS[0m [37m"PendingRegistration_company_phone"[0m[37m,[0m [37m"PendingRegistration"[0m[37m.[0m[37m"company_abn"[0m [94mAS[0m [37m"PendingRegistration_company_abn"[0m[37m,[0m [37m"PendingRegistration"[0m[37m.[0m[37m"verification_token"[0m [94mAS[0m [37m"PendingRegistration_verification_token"[0m[37m,[0m [37m"PendingRegistration"[0m[37m.[0m[37m"expires_at"[0m [94mAS[0m [37m"PendingRegistration_expires_at"[0m[37m,[0m [37m"PendingRegistration"[0m[37m.[0m[37m"created_at"[0m [94mAS[0m [37m"PendingRegistration_created_at"[0m [94mFROM[0m [37m"auth"[0m[37m.[0m[37m"pending_registrations"[0m [37m"PendingRegistration"[0m [94mWHERE[0m [37m([0m[37m([0m[37m"PendingRegistration"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m[37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["admin@testconstruction.com"][0m
[4m[31mquery failed:[39m[24m [94mSELECT[0m [37m"PendingRegistration"[0m[37m.[0m[37m"registration_id"[0m [94mAS[0m [37m"PendingRegistration_registration_id"[0m[37m,[0m [37m"PendingRegistration"[0m[37m.[0m[37m"email"[0m [94mAS[0m [37m"PendingRegistration_email"[0m[37m,[0m [37m"PendingRegistration"[0m[37m.[0m[37m"password_hash"[0m [94mAS[0m [37m"PendingRegistration_password_hash"[0m[37m,[0m [37m"PendingRegistration"[0m[37m.[0m[37m"first_name"[0m [94mAS[0m [37m"PendingRegistration_first_name"[0m[37m,[0m [37m"PendingRegistration"[0m[37m.[0m[37m"last_name"[0m [94mAS[0m [37m"PendingRegistration_last_name"[0m[37m,[0m [37m"PendingRegistration"[0m[37m.[0m[37m"phone"[0m [94mAS[0m [37m"PendingRegistration_phone"[0m[37m,[0m [37m"PendingRegistration"[0m[37m.[0m[37m"company_name"[0m [94mAS[0m [37m"PendingRegistration_company_name"[0m[37m,[0m [37m"PendingRegistration"[0m[37m.[0m[37m"company_email"[0m [94mAS[0m [37m"PendingRegistration_company_email"[0m[37m,[0m [37m"PendingRegistration"[0m[37m.[0m[37m"company_phone"[0m [94mAS[0m [37m"PendingRegistration_company_phone"[0m[37m,[0m [37m"PendingRegistration"[0m[37m.[0m[37m"company_abn"[0m [94mAS[0m [37m"PendingRegistration_company_abn"[0m[37m,[0m [37m"PendingRegistration"[0m[37m.[0m[37m"verification_token"[0m [94mAS[0m [37m"PendingRegistration_verification_token"[0m[37m,[0m [37m"PendingRegistration"[0m[37m.[0m[37m"expires_at"[0m [94mAS[0m [37m"PendingRegistration_expires_at"[0m[37m,[0m [37m"PendingRegistration"[0m[37m.[0m[37m"created_at"[0m [94mAS[0m [37m"PendingRegistration_created_at"[0m [94mFROM[0m [37m"auth"[0m[37m.[0m[37m"pending_registrations"[0m [37m"PendingRegistration"[0m [94mWHERE[0m [37m([0m[37m([0m[37m"PendingRegistration"[0m[37m.[0m[37m"email"[0m [37m=[0m [37m$[0m[32m1[0m[37m)[0m[37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["admin@testconstruction.com"][0m
[4m[31merror:[39m[24m error: relation "auth.pending_registrations" does not exist
{
  "method": "POST",
  "url": "/signup",
  "status": 400,
  "duration": "997ms",
  "ip": "::1",
  "userAgent": "curl/8.7.1"
}

üîÑ Shutting down gracefully...
